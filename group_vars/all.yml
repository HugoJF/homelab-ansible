---

traefik_project_src: "{{ ansible_user_dir }}/code/traefik"

traefik_services:
  - name: cups
    url: cups.hugo.dev.br
    port: 631

  - name: octoprint
    url: octoprint.hugo.dev.br
    port: 8081

  - name: firefly
    url: firefly.hugo.dev.br
    port: 6666

  - name: pihole
    url: pihole.hugo.dev.br
    port: 800
    middlewares:
      - add-admin-prefix

  - name: memos
    url: memos.hugo.dev.br
    port: 5230

  - name: grafana
    url: grafana.hugo.dev.br
    port: 3000

  - name: prometheus
    url: prometheus.hugo.dev.br
    port: 9090

  - name: paperless
    url: paperless.hugo.dev.br
    port: 8998

homeassistant_api_key: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  36393664346464613838306633626132353364666230386237623163386134303634326464643064
  3266666531646532353631326631313662303932353039330a646335613734303130383364623831
  63396266363235363039636430386137633239636433313661326336376639393162303363343661
  3963373336313532640a346330656534633735386632643866316432376131303531656539363439
  36633139653330383762386439306361356266666133333666346532376164303764326436376534
  39306666316434616530383663356338313262363534373030343834376535326336383031363637
  39373064303564323636333761316333666466653839386135616635353062386333303838313866
  65373665313635393066313235346361656364623830383031336231626362333830666665316662
  62333230643438643432663862613963646664663666373461666133356661313261396230333733
  63326633383935353437393737356535666138336331623335656635336464393564373236316230
  66383439633163336430333937643638633165633864636166613637623933613433616333373033
  32346661393235313034346437643965613438323733656432643837653732666538366164396363
  33366637643232353234636132366137323338383130316537306233663262316635
monitoring_project_src: "{{ ansible_user_dir }}/code/monitoring"

prometheus_config:
  global:
    scrape_interval: 15s
    evaluation_interval: 15s

    external_labels:
      monitor: 'my-project'

  rule_files:
    - 'alert.rules'

  alerting:
    alertmanagers:
      - scheme: http
        static_configs:
          - targets:
              - "alertmanager:9093"

  scrape_configs:
    - job_name: 'prometheus'
      scrape_interval: 15s
      static_configs:
        - targets: [ 'localhost:9090' ]

    - job_name: 'cadvisor'
      scrape_interval: 15s
      static_configs:
        - targets: [ 'cadvisor:8080' ]

    #    - job_name: 'ibt'
    #      scrape_interval: 5s
    #      static_configs:
    #        - targets: [ '192.168.15.74:8080' ]

    - job_name: 'ha'
      metrics_path: /api/prometheus
      scrape_interval: 30s
      bearer_token: "{{ homeassistant_api_key }}"
      static_configs:
        - targets: [ '192.168.15.6:8123' ]

    - job_name: 'node-exporter'
      scrape_interval: 15s
      static_configs:
        - targets: [ 'node-exporter:9100' ]